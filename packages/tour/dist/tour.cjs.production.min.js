"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,o=require("@reactour/utils"),r=require("@reactour/mask"),i=require("@reactour/popover"),s=require("@react-aria/focus"),a=require("@emotion/react");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t.indexOf(n=i[o])>=0||(r[n]=e[n]);return r}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var d={bottom:0,height:0,left:0,right:0,top:0,width:0,windowWidth:0,windowHeight:0};function p(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!0);var r=o.getWindow(),i=r.w,s=r.h;if(!t)return l({},o.getRect(e),{windowWidth:i,windowHeight:s});for(var a,u=o.getRect(e),d={bottom:0,height:0,left:i,right:0,top:s,width:0},p=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,void 0):void 0}}(e))){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}(t);!(a=p()).done;){var f=document.querySelector(a.value);if(f&&"none"!==f.style.display&&"hidden"!==f.style.visibility){var h=o.getRect(f);n||!e?(h.top<d.top&&(d.top=h.top),h.right>d.right&&(d.right=h.right),h.bottom>d.bottom&&(d.bottom=h.bottom),h.left<d.left&&(d.left=h.left),d.width=d.right-d.left,d.height=d.bottom-d.top):(h.top<u.top&&(u.top=h.top),h.right>u.right&&(u.right=h.right),h.bottom>u.bottom&&(u.bottom=h.bottom),h.left<u.left&&(u.left=h.left),u.width=u.right-u.left,u.height=u.bottom-u.top)}}var v=!(!n&&e)&&d.width>0&&d.height>0;return{left:(v?d:u).left,top:(v?d:u).top,right:(v?d:u).right,bottom:(v?d:u).bottom,width:(v?d:u).width,height:(v?d:u).height,windowWidth:i,windowHeight:s}}var f={badge:function(){return{position:"absolute",fontFamily:"monospace",background:"var(--reactour-accent,#007aff)",height:"1.875em",lineHeight:2,paddingLeft:"0.8125em",paddingRight:"0.8125em",fontSize:"1em",borderRadius:"1.625em",color:"white",textAlign:"center",boxShadow:"0 0.25em 0.5em rgba(0, 0, 0, 0.3)",top:"-0.8125em",left:"-0.8125em"}},controls:function(){return{display:"flex",marginTop:24,alignItems:"center",justifyContent:"space-between"}},navigation:function(){return{counterReset:"dot",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"}},button:function(e){return{display:"block",padding:0,border:0,background:"none",cursor:e.disabled?"not-allowed":"pointer"}},arrow:function(e){var t=e.disabled;return{color:t?"#caccce":"#646464",width:16,height:12,flex:"0 0 16px","&:hover":{color:t?"#caccce":"#000"}}},dot:function(e){var t=e.current;return{counterIncrement:"dot",width:8,height:8,border:t?"0":"1px solid #caccce",borderRadius:"100%",padding:0,display:"block",margin:4,transition:"opacity 0.3s, transform 0.3s",cursor:e.disabled?"not-allowed":"pointer",transform:"scale("+(t?1.25:1)+")",color:t?"var(--reactour-accent, #007aff)":"#caccce",background:t?"var(--reactour-accent, #007aff)":"none","&:before":{content:"counter(dot)",position:"absolute",bottom:"calc(100% + 0.25em)",left:"50%",opacity:0,transform:"translate(-50%, 1em)",transition:"0.3s",display:e.showNumber?"block":"none"},"&:hover":{backgroundColor:"currentColor","&:before":{opacity:.5,transform:"translate(-50%, -2px)"}}}},close:function(e){var t=e.disabled;return{position:"absolute",top:22,right:22,width:9,height:9,color:t?"#caccce":"#5e5e5e","&:hover":{color:t?"#caccce":"#000"}}}};function h(e){return function(t,n){var o=f[t](n),r=e[t];return r?r(o,n):o}}var v=function(e){var t=e.styles,n=e.children,o=h(void 0===t?{}:t);return a.jsx("span",{css:o("badge",{})},n)},b=function(e){var t=e.styles,n=void 0===t?{}:t,o=e.steps,r=e.setCurrentStep,i=e.currentStep,s=e.setIsOpen,l=e.nextButton,u=e.prevButton,c=e.disableDots,d=e.hideButtons,p=e.disableAll,f=e.rtl,v=o.length,b=h(n),m=function(e){var t=e.onClick,o=e.kind,s=void 0===o?"next":o,l=e.children,u=e.hideArrow;return a.jsx("button",{css:b("button",{kind:s,disabled:p||("next"===s?v-1===i:0===i)}),onClick:function(){p||(t&&"function"==typeof t?t():r("next"===s?Math.min(i+1,v-1):Math.max(i-1,0)))},"aria-label":"Go to "+s+" step"},u?null:a.jsx(g,{styles:n,inverted:f?"prev"===s:"next"===s,disabled:p||("next"===s?v-1===i:0===i)}),l)};return a.jsx("div",{css:b("controls",{}),dir:f?"rtl":"ltr"},d?null:u&&"function"==typeof u?u({Button:m,setCurrentStep:r,currentStep:i,stepsLength:v,setIsOpen:s}):a.jsx(m,{kind:"prev"}),a.jsx("div",{css:b("navigation",{})},Array.from({length:v},(function(e,t){return t})).map((function(e){var t;return a.jsx("button",{css:b("dot",{current:e===i,disabled:c||p}),onClick:function(){c||p||r(e)},key:"navigation_dot_"+e,"aria-label":(null==(t=o[e])?void 0:t.navDotAriaLabel)||"Go to step "+(e+1)})}))),d?null:l&&"function"==typeof l?l({Button:m,setCurrentStep:r,currentStep:i,stepsLength:v,setIsOpen:s}):a.jsx(m,null))},g=function(e){var t=e.styles,n=e.inverted,o=void 0!==n&&n,r=e.disabled,i=h(void 0===t?{}:t);return a.jsx("svg",{viewBox:"0 0 18.4 14.4",css:i("arrow",{inverted:o,disabled:r})},a.jsx("path",{d:o?"M17 7.2H1M10.8 1L17 7.2l-6.2 6.2":"M1.4 7.2h16M7.6 1L1.4 7.2l6.2 6.2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeMiterlimit:"10"}))},m=function(e){var t=e.content;return"function"==typeof t?t({setCurrentStep:e.setCurrentStep,transition:e.transition,currentStep:e.currentStep,setIsOpen:e.setIsOpen}):t},y=function(e){var t=e.styles,n=void 0===t?{}:t,o=e.onClick,r=e.disabled,i=u(e,["styles","onClick","disabled"]),s=h(n);return a.jsx("button",Object.assign({css:l({},s("button",{}),s("close",{disabled:r})),onClick:o},i),a.jsx("svg",{viewBox:"0 0 9.1 9.1","aria-hidden":!0,role:"presentation"},a.jsx("path",{fill:"currentColor",d:"M5.9 4.5l2.8-2.8c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L4.5 3.1 1.7.3C1.3-.1.7-.1.3.3c-.4.4-.4 1 0 1.4l2.8 2.8L.3 7.4c-.4.4-.4 1 0 1.4.2.2.4.3.7.3s.5-.1.7-.3L4.5 6l2.8 2.8c.3.2.5.3.8.3s.5-.1.7-.3c.4-.4.4-1 0-1.4L5.9 4.5z"})))},w=function(e){var n=e.disableKeyboardNavigation,o=e.setCurrentStep,r=e.setIsOpen,i=e.stepsLength,s=e.disable,a=e.rtl;function l(e){var t,l,u;function c(){o((function(e){return Math.min(e+1,i-1)}))}function d(){o((function(e){return Math.max(e-1,0)}))}e.stopPropagation(),!0===n||s||(n&&(t=n.includes("esc"),l=n.includes("right"),u=n.includes("left")),27!==e.keyCode||t||(e.preventDefault(),r(!1)),39!==e.keyCode||l||(e.preventDefault(),a?d():c()),37!==e.keyCode||u||(e.preventDefault(),a?c():d()))}return t.useEffect((function(){return window.addEventListener("keydown",l,!1),function(){window.removeEventListener("keydown",l)}}),[s]),null},S=function(e){var s=e.currentStep,a=e.setCurrentStep,u=e.setIsOpen,c=e.steps,f=void 0===c?[]:c,h=e.styles,g=e.afterOpen,S=e.beforeClose,k=e.padding,x=void 0===k?10:k,O=e.position,E=e.onClickMask,j=e.onClickHighlighted,A=e.badgeContent,I=e.className,L=void 0===I?"reactour__popover":I,B=e.maskClassName,M=void 0===B?"reactour__mask":B,N=e.highlightedMaskClassName,P=e.disableInteraction,R=e.disableFocusLock,T=e.disableDotsNavigation,D=e.disableKeyboardNavigation,z=e.nextButton,q=e.prevButton,_=e.showPrevNextButtons,H=void 0===_||_,F=e.showCloseButton,W=void 0===F||F,V=e.showNavigation,K=void 0===V||V,G=e.showBadge,U=void 0===G||G,$=e.disabledActions,J=e.setDisabledActions,Q=e.rtl,X=e.accessibilityOptions,Y=void 0===X?{closeButtonAriaLabel:"Close Tour",showNavigationScreenReaders:!0}:X,Z=f[s],ee=(null==Z?void 0:Z.styles)||(void 0===h?{}:h),te=function(e,n){void 0===n&&(n={block:"center",behavior:"smooth",inViewThreshold:0});var r=t.useState(!1),i=r[0],s=r[1],a=t.useState(!1),u=a[0],c=a[1],f=t.useState(null),h=f[0],v=f[1],b=t.useState(d),g=b[0],m=b[1],y=document.querySelector(null==e?void 0:e.selector),w=t.useCallback((function(){m(p(y,null==e?void 0:e.highlightedSelectors,null==e?void 0:e.bypassElem))}),[y,null==e?void 0:e.highlightedSelectors]);return t.useEffect((function(){return w(),window.addEventListener("resize",w),function(){return window.removeEventListener("resize",w)}}),[y,null==e?void 0:e.highlightedSelectors,h]),t.useEffect((function(){!o.inView(l({},g,{threshold:n.inViewThreshold}))&&y&&(s(!0),o.smoothScroll(y,n).then((function(){u||v(Date.now())})).finally((function(){s(!1)})))}),[g]),{sizes:g,transition:i,target:y,observableRefresher:function(){c(!0),m(p(y,null==e?void 0:e.highlightedSelectors,null==e?void 0:e.bypassElem)),c(!1)}}}(Z,{block:"center",behavior:e.scrollSmooth?"smooth":"auto",inViewThreshold:e.inViewThreshold}),ne=te.sizes,oe=te.transition,re=te.observableRefresher,ie=te.target;t.useEffect((function(){return g&&"function"==typeof g&&g(ie),function(){S&&"function"==typeof S&&S(ie)}}),[]);var se=function(e){return"object"==typeof e&&null!==e?{maskPadding:e.mask,popoverPadding:e.popover}:{maskPadding:e,popoverPadding:e}}((null==Z?void 0:Z.padding)||x),ae=se.maskPadding,le=se.popoverPadding,ue=A&&"function"==typeof A?A({currentStep:s,totalSteps:f.length,transition:oe}):s+1,ce=null!=Z&&Z.stepInteraction?!(null!=Z&&Z.stepInteraction):P;t.useEffect((function(){null!=Z&&Z.action&&"function"==typeof(null==Z?void 0:Z.action)&&(null==Z||Z.action(ie)),null!=Z&&Z.disableActions&&J(!0)}),[Z]);var de=oe?"center":null!=Z&&Z.position?null==Z?void 0:Z.position:O;return Z?n.createElement(o.Portal,null,n.createElement(C,{disabled:R},n.createElement(o.Observables,{mutationObservables:null==Z?void 0:Z.mutationObservables,resizeObservables:null==Z?void 0:Z.resizeObservables,refresh:re}),n.createElement(w,{setCurrentStep:a,setIsOpen:u,stepsLength:f.length,disableKeyboardNavigation:D,disable:$,rtl:Q}),n.createElement(r.Mask,{sizes:ne,onClick:function(){$||(E&&"function"==typeof E?E({setCurrentStep:a,setIsOpen:u,currentStep:s,steps:f}):u(!1))},styles:l({highlightedArea:function(e){return l({},e,{display:ce?"block":"none"})}},ee),padding:ae,highlightedAreaClassName:N,className:M,onClickHighlighted:j}),n.createElement(i.Popover,{sizes:ne,styles:ee,position:de,padding:le,"aria-labelledby":null==Y?void 0:Y.ariaLabelledBy,className:L},U?n.createElement(v,{styles:ee},ue):null,W?n.createElement(y,{styles:ee,"aria-label":null==Y?void 0:Y.closeButtonAriaLabel,disabled:$,onClick:function(){$||u(!1)}}):null,n.createElement(m,{content:null==Z?void 0:Z.content,setCurrentStep:a,currentStep:s,transition:oe,setIsOpen:u}),K?n.createElement(b,{setCurrentStep:a,currentStep:s,setIsOpen:u,steps:f,styles:ee,"aria-hidden":!(null!=Y&&Y.showNavigationScreenReaders),nextButton:z,prevButton:q,disableDots:T,hideButtons:!H,disableAll:$,rtl:Q}):null))):null},C=function(e){var t=e.children;return e.disabled?n.createElement(n.Fragment,null,t):n.createElement(s.FocusScope,{contain:!0,autoFocus:!0,restoreFocus:!0},t)},k=n.createContext({isOpen:!1,setIsOpen:function(){return!1},currentStep:0,setCurrentStep:function(){return 0},steps:[],setSteps:function(){return[]},disabledActions:!1,setDisabledActions:function(){return!1}});function x(){return t.useContext(k)}exports.Tour=S,exports.TourContext=k,exports.TourProvider=function(e){var o=e.children,r=e.defaultOpen,i=void 0!==r&&r,s=e.startAt,a=void 0===s?0:s,c=e.steps,d=e.onClose,p=u(e,["children","defaultOpen","startAt","steps","onClose"]),f=t.useState(i),h=f[0],v=f[1],b=t.useState(a),g=b[0],m=b[1],y=t.useState(c),w=y[0],C=y[1],x=t.useState(!1),O=l({isOpen:h,setIsOpen:v,currentStep:g,setCurrentStep:m,steps:w,setSteps:C,disabledActions:x[0],setDisabledActions:x[1]},p),E=function(e){var n=t.useRef();return t.useEffect((function(){n.current=e}),[e]),n.current}(h);return t.useEffect((function(){!0===E&&!1===h&&d&&"function"==typeof d&&d({currentStep:g,steps:w})}),[h,E]),n.createElement(k.Provider,{value:O},o,h?n.createElement(S,Object.assign({},O)):null)},exports.default=S,exports.useTour=x,exports.withTour=function(e){return function(t){var o=x();return n.createElement(e,Object.assign({},t,o))}};
//# sourceMappingURL=tour.cjs.production.min.js.map
