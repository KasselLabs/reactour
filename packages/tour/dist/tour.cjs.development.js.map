{"version":3,"file":"tour.cjs.development.js","sources":["../src/hooks.tsx","../src/styles.tsx","../src/Badge.tsx","../src/Navigation.tsx","../src/Content.tsx","../src/Close.tsx","../src/Keyboard.tsx","../src/Tour.tsx","../src/usePrevious.tsx","../src/Context.tsx","../src/withTour.tsx"],"sourcesContent":["import { useEffect, useCallback, useState } from 'react'\nimport { inView, smoothScroll, getWindow, getRect } from '@reactour/utils'\nimport { StepType } from './types'\n\nlet initialState = {\n  bottom: 0,\n  height: 0,\n  left: 0,\n  right: 0,\n  top: 0,\n  width: 0,\n  windowWidth: 0,\n  windowHeight: 0,\n}\n\nexport function useSizes(\n  step: StepType,\n  scrollOptions: ScrollIntoViewOptions & { inViewThreshold?: number } = {\n    block: 'center',\n    behavior: 'smooth',\n    inViewThreshold: 0,\n  }\n) {\n  const [transition, setTransition] = useState(false)\n  const [observing, setObserving] = useState(false)\n  const [refresher, setRefresher] = useState(null as any)\n  const [dimensions, setdDimensions] = useState(initialState)\n  const target = document.querySelector(step?.selector)\n\n  const handleResize = useCallback(() => {\n    // if (!target && !step?.highlightedSelectors) return\n    setdDimensions(\n      getHighlightedRect(target, step?.highlightedSelectors, step?.bypassElem)\n    )\n  }, [target, step?.highlightedSelectors])\n\n  useEffect(() => {\n    handleResize()\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [target, step?.highlightedSelectors, refresher])\n\n  useEffect(() => {\n    const isInView = inView({\n      ...dimensions,\n      threshold: scrollOptions.inViewThreshold,\n    })\n    // TODO: - Solve cases when target elemente exceeds viewport\n    // TODO: - Solve cases when no target but highlightedSelectors\n    if (!isInView && target) {\n      setTransition(true)\n      smoothScroll(target, scrollOptions)\n        .then(() => {\n          if (!observing) setRefresher(Date.now())\n        })\n        .finally(() => {\n          setTransition(false)\n        })\n    }\n  }, [dimensions])\n\n  function observableRefresher() {\n    setObserving(true)\n    setdDimensions(\n      getHighlightedRect(target, step?.highlightedSelectors, step?.bypassElem)\n    )\n    setObserving(false)\n  }\n\n  return { sizes: dimensions, transition, target, observableRefresher }\n}\n\nfunction getHighlightedRect(\n  node: Element | null,\n  highlightedSelectors: string[] = [],\n  bypassElem = true\n) {\n  const { w: windowWidth, h: windowHeight } = getWindow()\n  if (!highlightedSelectors) {\n    return {\n      ...getRect(node),\n      windowWidth,\n      windowHeight,\n    }\n  }\n\n  let attrs = getRect(node)\n  let altAttrs = {\n    bottom: 0,\n    height: 0,\n    left: windowWidth,\n    right: 0,\n    top: windowHeight,\n    width: 0,\n  }\n\n  for (const selector of highlightedSelectors) {\n    const element = document.querySelector(selector) as HTMLElement\n    if (\n      !element ||\n      element.style.display === 'none' ||\n      element.style.visibility === 'hidden'\n    ) {\n      continue\n    }\n\n    const rect = getRect(element)\n\n    if (bypassElem || !node) {\n      if (rect.top < altAttrs.top) {\n        altAttrs.top = rect.top\n      }\n\n      if (rect.right > altAttrs.right) {\n        altAttrs.right = rect.right\n      }\n\n      if (rect.bottom > altAttrs.bottom) {\n        altAttrs.bottom = rect.bottom\n      }\n\n      if (rect.left < altAttrs.left) {\n        altAttrs.left = rect.left\n      }\n\n      altAttrs.width = altAttrs.right - altAttrs.left\n      altAttrs.height = altAttrs.bottom - altAttrs.top\n    } else {\n      if (rect.top < attrs.top) {\n        attrs.top = rect.top\n      }\n\n      if (rect.right > attrs.right) {\n        attrs.right = rect.right\n      }\n\n      if (rect.bottom > attrs.bottom) {\n        attrs.bottom = rect.bottom\n      }\n\n      if (rect.left < attrs.left) {\n        attrs.left = rect.left\n      }\n\n      attrs.width = attrs.right - attrs.left\n      attrs.height = attrs.bottom - attrs.top\n    }\n  }\n\n  const bypassable =\n    bypassElem || !node ? altAttrs.width > 0 && altAttrs.height > 0 : false\n\n  return {\n    left: (bypassable ? altAttrs : attrs).left,\n    top: (bypassable ? altAttrs : attrs).top,\n    right: (bypassable ? altAttrs : attrs).right,\n    bottom: (bypassable ? altAttrs : attrs).bottom,\n    width: (bypassable ? altAttrs : attrs).width,\n    height: (bypassable ? altAttrs : attrs).height,\n    windowWidth,\n    windowHeight,\n  }\n}\n","export type StylesKeys =\n  | 'badge'\n  | 'controls'\n  | 'navigation'\n  | 'button'\n  | 'arrow'\n  | 'dot'\n  | 'close'\n\nexport type StylesObj = {\n  [key in StylesKeys]?: StyleFn\n}\n\nexport type StyleFn = (\n  props: { [key: string]: any },\n  state?: { [key: string]: any }\n) => React.CSSProperties\n\nexport type Styles = {\n  badge: StyleFn\n  controls: StyleFn\n  navigation: StyleFn\n  button: StyleFn\n  arrow: StyleFn\n  dot: StyleFn\n  close: StyleFn\n}\n\nexport type StyleKey = keyof Styles\n\nexport const defaultStyles: Styles = {\n  badge: () => ({\n    position: 'absolute',\n    fontFamily: 'monospace',\n    background: 'var(--reactour-accent,#007aff)',\n    height: '1.875em',\n    lineHeight: 2,\n    paddingLeft: '0.8125em',\n    paddingRight: '0.8125em',\n    fontSize: '1em',\n    borderRadius: '1.625em',\n    color: 'white',\n    textAlign: 'center',\n    boxShadow: '0 0.25em 0.5em rgba(0, 0, 0, 0.3)',\n    top: '-0.8125em',\n    left: '-0.8125em',\n  }),\n  controls: () => ({\n    display: 'flex',\n    marginTop: 24,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  }),\n  navigation: () => ({\n    counterReset: 'dot',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  }),\n  button: ({ disabled }) => ({\n    display: 'block',\n    padding: 0,\n    border: 0,\n    background: 'none',\n    cursor: disabled ? 'not-allowed' : 'pointer',\n  }),\n  arrow: ({ disabled }) => ({\n    color: disabled ? '#caccce' : '#646464',\n    width: 16,\n    height: 12,\n    flex: '0 0 16px',\n    '&:hover': {\n      color: disabled ? '#caccce' : '#000',\n    },\n  }),\n  dot: ({ current, disabled, showNumber }) => ({\n    counterIncrement: 'dot',\n    width: 8,\n    height: 8,\n    border: current ? '0' : '1px solid #caccce',\n    borderRadius: '100%',\n    padding: 0,\n    display: 'block',\n    margin: 4,\n    transition: 'opacity 0.3s, transform 0.3s',\n    cursor: disabled ? 'not-allowed' : 'pointer',\n    transform: `scale(${current ? 1.25 : 1})`,\n    color: current ? 'var(--reactour-accent, #007aff)' : '#caccce',\n    background: current ? 'var(--reactour-accent, #007aff)' : 'none',\n    '&:before': {\n      content: 'counter(dot)',\n      position: 'absolute',\n      bottom: 'calc(100% + 0.25em)',\n      left: '50%',\n      opacity: 0,\n      transform: 'translate(-50%, 1em)',\n      transition: '0.3s',\n      display: showNumber ? 'block' : 'none',\n    },\n    '&:hover': {\n      backgroundColor: 'currentColor',\n      '&:before': {\n        opacity: 0.5,\n        transform: 'translate(-50%, -2px)',\n      },\n    },\n  }),\n  close: ({ disabled }) => ({\n    position: 'absolute',\n    top: 22,\n    right: 22,\n    width: 9,\n    height: 9,\n    color: disabled ? '#caccce' : '#5e5e5e',\n    '&:hover': {\n      color: disabled ? '#caccce' : '#000',\n    },\n  }),\n}\n\nexport type getStylesType = (key: StylesKeys, extra?: any) => {}\n\nexport function stylesMatcher(styles: StylesObj) {\n  return (key: StyleKey, state: {}): {} => {\n    const base = defaultStyles[key](state)\n    const custom = styles[key]\n    return custom ? custom(base, state) : base\n  }\n}\n","/** @jsx jsx */\nimport { jsx } from '@emotion/react'\nimport React from 'react'\nimport { StylesObj, stylesMatcher } from './styles'\n\nconst Badge: React.FC<BadgeProps> = ({ styles = {}, children }) => {\n  const getStyles = stylesMatcher(styles)\n  return <span css={getStyles('badge', {})}>{children}</span>\n}\n\nexport type BadgeProps = {\n  styles?: StylesObj\n}\n\nexport default Badge\n","/** @jsx jsx */\nimport { jsx } from '@emotion/react'\nimport React, { Dispatch } from 'react'\nimport { StylesObj, stylesMatcher } from './styles'\nimport { StepType, BtnFnProps, NavButtonProps } from './types'\n\nconst Navigation: React.FC<NavigationProps> = ({\n  styles = {},\n  steps,\n  setCurrentStep,\n  currentStep,\n  setIsOpen,\n  nextButton,\n  prevButton,\n  disableDots,\n  hideButtons,\n  disableAll,\n  rtl,\n}) => {\n  const stepsLength = steps.length\n  const getStyles = stylesMatcher(styles)\n\n  const Button: React.FC<NavButtonProps> = ({\n    onClick,\n    kind = 'next',\n    children,\n    hideArrow,\n  }) => {\n    function clickHandler() {\n      if (!disableAll) {\n        if (onClick && typeof onClick === 'function') {\n          onClick()\n        } else {\n          if (kind === 'next') {\n            setCurrentStep(Math.min(currentStep + 1, stepsLength - 1))\n          } else {\n            setCurrentStep(Math.max(currentStep - 1, 0))\n          }\n        }\n      }\n    }\n\n    return (\n      <button\n        css={getStyles('button', {\n          kind,\n          disabled: disableAll\n            ? disableAll\n            : kind === 'next'\n            ? stepsLength - 1 === currentStep\n            : currentStep === 0,\n        })}\n        onClick={clickHandler}\n        aria-label={`Go to ${kind} step`}\n      >\n        {!hideArrow ? (\n          <Arrow\n            styles={styles}\n            inverted={rtl ? kind === 'prev' : kind === 'next'}\n            disabled={\n              disableAll\n                ? disableAll\n                : kind === 'next'\n                ? stepsLength - 1 === currentStep\n                : currentStep === 0\n            }\n          />\n        ) : null}\n        {children}\n      </button>\n    )\n  }\n\n  return (\n    <div css={getStyles('controls', {})} dir={rtl ? 'rtl' : 'ltr'}>\n      {!hideButtons ? (\n        prevButton && typeof prevButton === 'function' ? (\n          prevButton({\n            Button,\n            setCurrentStep,\n            currentStep,\n            stepsLength,\n            setIsOpen,\n          })\n        ) : (\n          <Button kind=\"prev\" />\n        )\n      ) : null}\n      <div css={getStyles('navigation', {})}>\n        {Array.from({ length: stepsLength }, (_, i) => i).map(index => {\n          return (\n            <button\n              css={getStyles('dot', {\n                current: index === currentStep,\n                disabled: disableDots || disableAll,\n              })}\n              onClick={() => {\n                if (!disableDots && !disableAll) setCurrentStep(index)\n              }}\n              key={`navigation_dot_${index}`}\n              aria-label={\n                steps[index]?.navDotAriaLabel || `Go to step ${index + 1}`\n              }\n            />\n          )\n        })}\n      </div>\n      {!hideButtons ? (\n        nextButton && typeof nextButton === 'function' ? (\n          nextButton({\n            Button,\n            setCurrentStep,\n            currentStep,\n            stepsLength,\n            setIsOpen,\n          })\n        ) : (\n          <Button />\n        )\n      ) : null}\n    </div>\n  )\n}\n\ntype BaseProps = {\n  styles?: StylesObj\n}\n\ntype NavigationProps = BaseProps & {\n  setCurrentStep: Dispatch<React.SetStateAction<number>>\n  steps: StepType[]\n  currentStep: number\n  disableDots?: boolean\n  nextButton?: (props: BtnFnProps) => void\n  prevButton?: (props: BtnFnProps) => void\n  setIsOpen: Dispatch<React.SetStateAction<Boolean>>\n  hideButtons?: boolean\n  hideDots?: boolean\n  disableAll?: boolean\n  rtl?: boolean\n}\n\nexport default Navigation\n\nconst Arrow: React.FC<BaseProps & {\n  inverted?: Boolean\n  disabled?: Boolean\n}> = ({ styles = {}, inverted = false, disabled }) => {\n  const getStyles = stylesMatcher(styles)\n  return (\n    <svg\n      viewBox=\"0 0 18.4 14.4\"\n      css={getStyles('arrow', { inverted, disabled })}\n    >\n      <path\n        d={\n          inverted\n            ? 'M17 7.2H1M10.8 1L17 7.2l-6.2 6.2'\n            : 'M1.4 7.2h16M7.6 1L1.4 7.2l6.2 6.2'\n        }\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeMiterlimit=\"10\"\n      />\n    </svg>\n  )\n}\n","import React, { Dispatch } from 'react'\n\nconst Content: React.FC<ContentProps> = ({\n  content,\n  setCurrentStep,\n  transition,\n  currentStep,\n  setIsOpen,\n}) => {\n  return typeof content === 'function'\n    ? content({ setCurrentStep, transition, currentStep, setIsOpen })\n    : content\n}\n\ntype ContentProps = {\n  content: any\n  setCurrentStep: Dispatch<React.SetStateAction<number>>\n  setIsOpen?: Dispatch<React.SetStateAction<Boolean>>\n  currentStep: number\n  transition?: boolean\n}\n\nexport default Content\n","/** @jsx jsx */\nimport { jsx } from '@emotion/react'\nimport React from 'react'\nimport { StylesObj, stylesMatcher } from './styles'\n\nconst Close: React.FC<CloseProps> = ({\n  styles = {},\n  onClick,\n  disabled,\n  ...props\n}) => {\n  const getStyles = stylesMatcher(styles)\n  return (\n    <button\n      css={{ ...getStyles('button', {}), ...getStyles('close', { disabled }) }}\n      onClick={onClick}\n      {...props}\n    >\n      <svg viewBox=\"0 0 9.1 9.1\" aria-hidden role=\"presentation\">\n        <path\n          fill=\"currentColor\"\n          d=\"M5.9 4.5l2.8-2.8c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L4.5 3.1 1.7.3C1.3-.1.7-.1.3.3c-.4.4-.4 1 0 1.4l2.8 2.8L.3 7.4c-.4.4-.4 1 0 1.4.2.2.4.3.7.3s.5-.1.7-.3L4.5 6l2.8 2.8c.3.2.5.3.8.3s.5-.1.7-.3c.4-.4.4-1 0-1.4L5.9 4.5z\"\n        />\n      </svg>\n    </button>\n  )\n}\n\ntype CloseProps = {\n  styles?: StylesObj\n  onClick?: () => void\n  disabled?: boolean\n}\n\nexport default Close\n","import React, { Dispatch, useEffect } from 'react'\nimport { KeyboardParts } from './types'\n\nconst Keyboard: React.FC<KeyboardProps> = ({\n  disableKeyboardNavigation,\n  setCurrentStep,\n  setIsOpen,\n  stepsLength,\n  disable,\n  rtl,\n}) => {\n  function keyDownHandler(e: any) {\n    e.stopPropagation()\n\n    if (disableKeyboardNavigation === true || disable) {\n      return\n    }\n    let isEscDisabled, isRightDisabled, isLeftDisabled\n    if (disableKeyboardNavigation) {\n      isEscDisabled = disableKeyboardNavigation.includes('esc')\n      isRightDisabled = disableKeyboardNavigation.includes('right')\n      isLeftDisabled = disableKeyboardNavigation.includes('left')\n    }\n    function next() {\n      setCurrentStep(c => Math.min(c + 1, stepsLength - 1))\n    }\n\n    function prev() {\n      setCurrentStep(c => Math.max(c - 1, 0))\n    }\n    if (e.keyCode === 27 && !isEscDisabled) {\n      e.preventDefault()\n      setIsOpen(false)\n    }\n    if (e.keyCode === 39 && !isRightDisabled) {\n      e.preventDefault()\n      if (rtl) {\n        prev()\n      } else {\n        next()\n      }\n    }\n    if (e.keyCode === 37 && !isLeftDisabled) {\n      e.preventDefault()\n      if (rtl) {\n        next()\n      } else {\n        prev()\n      }\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', keyDownHandler, false)\n    return () => {\n      window.removeEventListener('keydown', keyDownHandler)\n    }\n  }, [disable])\n\n  return null\n}\n\nexport type KeyboardProps = {\n  disableKeyboardNavigation?: boolean | KeyboardParts[]\n  setCurrentStep: Dispatch<React.SetStateAction<number>>\n  setIsOpen: Dispatch<React.SetStateAction<Boolean>>\n  stepsLength: number\n  disable?: boolean\n  rtl?: boolean\n}\n\nexport default Keyboard\n","import React, { useEffect } from 'react'\nimport { Portal, Observables } from '@reactour/utils'\nimport { Mask } from '@reactour/mask'\nimport { Popover } from '@reactour/popover'\nimport { FocusScope } from '@react-aria/focus'\nimport { useSizes } from './hooks'\nimport { TourProps, Padding } from './types'\nimport Badge from './Badge'\nimport Navigation from './Navigation'\nimport Content from './Content'\nimport Close from './Close'\nimport Keyboard from './Keyboard'\n\nconst Tour: React.FC<TourProps> = ({\n  currentStep,\n  setCurrentStep,\n  setIsOpen,\n  steps = [],\n  styles: globalStyles = {},\n  scrollSmooth,\n  afterOpen,\n  beforeClose,\n  padding = 10,\n  position,\n  onClickMask,\n  onClickHighlighted,\n  badgeContent,\n  className = 'reactour__popover',\n  maskClassName = 'reactour__mask',\n  highlightedMaskClassName,\n  disableInteraction,\n  disableFocusLock,\n  disableDotsNavigation,\n  disableKeyboardNavigation,\n  inViewThreshold,\n  nextButton,\n  prevButton,\n  showPrevNextButtons = true,\n  showCloseButton = true,\n  showNavigation = true,\n  showBadge = true,\n  disabledActions,\n  setDisabledActions,\n  rtl,\n  accessibilityOptions = {\n    closeButtonAriaLabel: 'Close Tour',\n    showNavigationScreenReaders: true,\n  },\n}) => {\n  const step = steps[currentStep]\n  const styles = step?.styles || globalStyles\n\n  const { sizes, transition, observableRefresher, target } = useSizes(step, {\n    block: 'center',\n    behavior: scrollSmooth ? 'smooth' : 'auto',\n    inViewThreshold,\n  })\n\n  useEffect(() => {\n    if (afterOpen && typeof afterOpen === 'function') {\n      afterOpen(target)\n    }\n    return () => {\n      if (beforeClose && typeof beforeClose === 'function') {\n        beforeClose(target)\n      }\n    }\n  }, [])\n\n  const { maskPadding, popoverPadding } = getPadding(step?.padding || padding)\n\n  function maskClickHandler() {\n    if (!disabledActions) {\n      if (onClickMask && typeof onClickMask === 'function') {\n        onClickMask({ setCurrentStep, setIsOpen, currentStep, steps })\n      } else {\n        setIsOpen(false)\n      }\n    }\n  }\n\n  const badge =\n    badgeContent && typeof badgeContent === 'function'\n      ? badgeContent({ currentStep, totalSteps: steps.length, transition })\n      : currentStep + 1\n\n  const doDisableInteraction = step?.stepInteraction\n    ? !step?.stepInteraction\n    : disableInteraction\n\n  useEffect(() => {\n    if (step?.action && typeof step?.action === 'function') {\n      step?.action(target)\n    }\n\n    if (step?.disableActions) {\n      setDisabledActions(true)\n    }\n  }, [step])\n\n  const popoverPosition = transition\n    ? 'center'\n    : step?.position\n    ? step?.position\n    : position\n\n  return step ? (\n    <Portal>\n      <FocusManager disabled={disableFocusLock}>\n        <Observables\n          mutationObservables={step?.mutationObservables}\n          resizeObservables={step?.resizeObservables}\n          refresh={observableRefresher}\n        />\n\n        <Keyboard\n          setCurrentStep={setCurrentStep}\n          setIsOpen={setIsOpen}\n          stepsLength={steps.length}\n          disableKeyboardNavigation={disableKeyboardNavigation}\n          disable={disabledActions}\n          rtl={rtl}\n        />\n\n        <Mask\n          sizes={sizes}\n          onClick={maskClickHandler}\n          styles={{\n            highlightedArea: base => ({\n              ...base,\n              display: doDisableInteraction ? 'block' : 'none',\n            }),\n            ...styles,\n          }}\n          padding={maskPadding}\n          highlightedAreaClassName={highlightedMaskClassName}\n          className={maskClassName}\n          onClickHighlighted={onClickHighlighted}\n        />\n\n        <Popover\n          sizes={sizes}\n          styles={styles}\n          position={popoverPosition}\n          padding={popoverPadding}\n          aria-labelledby={accessibilityOptions?.ariaLabelledBy}\n          className={className}\n        >\n          {showBadge ? <Badge styles={styles}>{badge}</Badge> : null}\n          {showCloseButton ? (\n            <Close\n              styles={styles}\n              aria-label={accessibilityOptions?.closeButtonAriaLabel}\n              disabled={disabledActions}\n              onClick={() => {\n                if (!disabledActions) setIsOpen(false)\n              }}\n            />\n          ) : null}\n          <Content\n            content={step?.content}\n            setCurrentStep={setCurrentStep}\n            currentStep={currentStep}\n            transition={transition}\n            setIsOpen={setIsOpen}\n          />\n          {showNavigation ? (\n            <Navigation\n              setCurrentStep={setCurrentStep}\n              currentStep={currentStep}\n              setIsOpen={setIsOpen}\n              steps={steps}\n              styles={styles}\n              aria-hidden={!accessibilityOptions?.showNavigationScreenReaders}\n              nextButton={nextButton}\n              prevButton={prevButton}\n              disableDots={disableDotsNavigation}\n              hideButtons={!showPrevNextButtons}\n              disableAll={disabledActions}\n              rtl={rtl}\n            />\n          ) : null}\n        </Popover>\n      </FocusManager>\n    </Portal>\n  ) : null\n}\n\nexport default Tour\n\nexport interface CustomCSS extends React.CSSProperties {\n  rx: number\n}\n\nconst FocusManager: React.FC<FocusProps> = ({ disabled, children }) => {\n  return disabled ? (\n    <>{children}</>\n  ) : (\n    <FocusScope contain autoFocus restoreFocus>\n      {children}\n    </FocusScope>\n  )\n}\n\ntype FocusProps = {\n  disabled?: boolean\n}\n\nfunction getPadding(padding?: Padding) {\n  if (typeof padding === 'object' && padding !== null) {\n    return {\n      maskPadding: padding.mask,\n      popoverPadding: padding.popover,\n    }\n  }\n  return {\n    maskPadding: padding,\n    popoverPadding: padding,\n  }\n}\n","import { useEffect, useRef } from 'react'\n\nfunction usePrevious(value: any) {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef()\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value\n  }, [value]) // Only re-run if value changes\n  // Return previous value (happens before update in useEffect above)\n  return ref.current\n}\n\nexport default usePrevious\n","import React, { useEffect, useContext } from 'react'\nimport { useState } from 'react'\nimport Tour from './Tour'\nimport { ProviderProps, TourProps } from './types'\nimport usePrevious from './usePrevious'\n\nconst defaultState = {\n  isOpen: false,\n  setIsOpen: () => false,\n  currentStep: 0,\n  setCurrentStep: () => 0,\n  steps: [],\n  setSteps: () => [],\n  disabledActions: false,\n  setDisabledActions: () => false,\n}\n\nconst TourContext = React.createContext<TourProps>(defaultState)\n\nconst TourProvider: React.FC<ProviderProps> = ({\n  children,\n  defaultOpen = false,\n  startAt = 0,\n  steps: defaultSteps,\n  onClose,\n  ...props\n}) => {\n  const [isOpen, setIsOpen] = useState(defaultOpen)\n  const [currentStep, setCurrentStep] = useState(startAt)\n  const [steps, setSteps] = useState(defaultSteps)\n  const [disabledActions, setDisabledActions] = useState(false)\n\n  const value = {\n    isOpen,\n    setIsOpen,\n    currentStep,\n    setCurrentStep,\n    steps,\n    setSteps,\n    disabledActions,\n    setDisabledActions,\n    ...props,\n  }\n\n  const previousIsOpen = usePrevious(isOpen)\n\n  useEffect(() => {\n    const hasClosedTour = previousIsOpen === true && isOpen === false\n\n    if (hasClosedTour && onClose && typeof onClose === 'function') {\n      onClose({ currentStep, steps })\n    }\n  }, [isOpen, previousIsOpen])\n\n  return (\n    <TourContext.Provider value={value}>\n      {children}\n      {isOpen ? <Tour {...value} /> : null}\n    </TourContext.Provider>\n  )\n}\n\nexport { TourProvider }\n\nexport default TourContext\n\nexport function useTour() {\n  return useContext(TourContext)\n}\n","import React from 'react'\nimport { useTour } from './Context'\n\nexport default function withTour<P>(WrappedComponent: React.ComponentType<P>) {\n  const ComponentWithTour = (props: P) => {\n    const tourProps = useTour()\n    return <WrappedComponent {...props} {...tourProps} />\n  }\n  return ComponentWithTour\n}\n"],"names":["initialState","bottom","height","left","right","top","width","windowWidth","windowHeight","useSizes","step","scrollOptions","block","behavior","inViewThreshold","useState","transition","setTransition","observing","setObserving","refresher","setRefresher","dimensions","setdDimensions","target","document","querySelector","selector","handleResize","useCallback","getHighlightedRect","highlightedSelectors","bypassElem","useEffect","window","addEventListener","removeEventListener","isInView","inView","threshold","smoothScroll","then","Date","now","observableRefresher","sizes","node","getWindow","w","h","getRect","attrs","altAttrs","element","style","display","visibility","rect","bypassable","defaultStyles","badge","position","fontFamily","background","lineHeight","paddingLeft","paddingRight","fontSize","borderRadius","color","textAlign","boxShadow","controls","marginTop","alignItems","justifyContent","navigation","counterReset","flexWrap","button","disabled","padding","border","cursor","arrow","flex","dot","current","showNumber","counterIncrement","margin","transform","content","opacity","backgroundColor","close","stylesMatcher","styles","key","state","base","custom","Badge","children","getStyles","jsx","css","Navigation","steps","setCurrentStep","currentStep","setIsOpen","nextButton","prevButton","disableDots","hideButtons","disableAll","rtl","stepsLength","length","Button","onClick","kind","hideArrow","clickHandler","Math","min","max","Arrow","inverted","dir","Array","from","_","i","map","index","navDotAriaLabel","viewBox","d","fill","stroke","strokeWidth","strokeLinecap","strokeMiterlimit","Content","Close","props","role","Keyboard","disableKeyboardNavigation","disable","keyDownHandler","e","stopPropagation","isEscDisabled","isRightDisabled","isLeftDisabled","includes","next","c","prev","keyCode","preventDefault","Tour","globalStyles","scrollSmooth","afterOpen","beforeClose","onClickMask","onClickHighlighted","badgeContent","className","maskClassName","highlightedMaskClassName","disableInteraction","disableFocusLock","disableDotsNavigation","showPrevNextButtons","showCloseButton","showNavigation","showBadge","disabledActions","setDisabledActions","accessibilityOptions","closeButtonAriaLabel","showNavigationScreenReaders","getPadding","maskPadding","popoverPadding","maskClickHandler","totalSteps","doDisableInteraction","stepInteraction","action","disableActions","popoverPosition","React","Portal","FocusManager","Observables","mutationObservables","resizeObservables","refresh","Mask","highlightedArea","highlightedAreaClassName","Popover","ariaLabelledBy","FocusScope","contain","autoFocus","restoreFocus","mask","popover","usePrevious","value","ref","useRef","defaultState","isOpen","setSteps","TourContext","createContext","TourProvider","defaultOpen","startAt","defaultSteps","onClose","previousIsOpen","hasClosedTour","Provider","useTour","useContext","withTour","WrappedComponent","ComponentWithTour","tourProps"],"mappings":"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"}